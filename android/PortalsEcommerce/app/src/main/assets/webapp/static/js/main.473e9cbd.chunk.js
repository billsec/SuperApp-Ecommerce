(this["webpackJsonpportals-ecommerce-demo"]=this["webpackJsonpportals-ecommerce-demo"]||[]).push([[1],{67:function(e,t,n){var c={"./ion-action-sheet.entry.js":[99,5],"./ion-alert.entry.js":[100,6],"./ion-app_8.entry.js":[101,7],"./ion-avatar_3.entry.js":[102,17],"./ion-back-button.entry.js":[103,18],"./ion-backdrop.entry.js":[104,45],"./ion-button_2.entry.js":[105,19],"./ion-card_5.entry.js":[106,20],"./ion-checkbox.entry.js":[107,21],"./ion-chip.entry.js":[108,22],"./ion-col_3.entry.js":[109,46],"./ion-datetime_3.entry.js":[110,10],"./ion-fab_3.entry.js":[111,23],"./ion-img.entry.js":[112,47],"./ion-infinite-scroll_2.entry.js":[113,48],"./ion-input.entry.js":[114,24],"./ion-item-option_3.entry.js":[115,25],"./ion-item_8.entry.js":[116,26],"./ion-loading.entry.js":[117,27],"./ion-menu_3.entry.js":[118,28],"./ion-modal.entry.js":[119,8],"./ion-nav_2.entry.js":[120,14],"./ion-popover.entry.js":[121,9],"./ion-progress-bar.entry.js":[122,29],"./ion-radio_2.entry.js":[123,30],"./ion-range.entry.js":[124,31],"./ion-refresher_2.entry.js":[125,11],"./ion-reorder_2.entry.js":[126,16],"./ion-ripple-effect.entry.js":[127,49],"./ion-route_4.entry.js":[128,32],"./ion-searchbar.entry.js":[129,33],"./ion-segment_2.entry.js":[130,34],"./ion-select_3.entry.js":[131,35],"./ion-slide_2.entry.js":[132,50],"./ion-spinner.entry.js":[133,13],"./ion-split-pane.entry.js":[134,51],"./ion-tab-bar_2.entry.js":[135,36],"./ion-tab_2.entry.js":[136,15],"./ion-text.entry.js":[137,37],"./ion-textarea.entry.js":[138,38],"./ion-toast.entry.js":[139,39],"./ion-toggle.entry.js":[140,12],"./ion-virtual-scroll.entry.js":[141,52]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=67,e.exports=r},69:function(e,t,n){var c={"./ion-icon.entry.js":[142,59]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=69,e.exports=r},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(27),a=n.n(s),i=n(2),o=n(53),j=n(16),l=n(0),d=function(){return Object(l.jsx)(i.t,{children:Object(l.jsxs)(i.h,{children:[Object(l.jsx)(i.c,{expand:"block",href:"/help",children:"Help Portal"}),Object(l.jsx)(i.c,{expand:"block",href:"/user",children:"Profile Portal"}),Object(l.jsx)(i.c,{expand:"block",href:"/cart-total",children:"Cart Portal"}),Object(l.jsx)(i.c,{expand:"block",href:"/checkout",children:"Checkout Modal Portal"}),Object(l.jsx)(i.c,{expand:"block",href:"/new-featured",children:"New Featured Component"})]})})},u=n(23),b=n(6),O=n(13),h=n(17),p=n(3),x=n(5),f=n(22),m=Object(f.d)("ShopAPI",{web:function(){return n.e(40).then(n.bind(null,163)).then((function(e){return new e.ShopAPIPluginWeb}))}}),v=r.a.createContext({}),y=function(e){var t=e.children,n=Object(c.useState)(!0),r=Object(O.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(),o=Object(O.a)(i,2),j=o[0],d=o[1],u=Object(c.useState)(),b=Object(O.a)(u,2),h=b[0],f=b[1],m=Object(c.useState)(),y=Object(O.a)(m,2),k=y[0],w=y[1],S=Object(c.useState)([]),P=Object(O.a)(S,2),M=P[0],E=P[1];Object(c.useEffect)((function(){function e(){return e=Object(x.a)(Object(p.a)().mark((function e(){var t,n,c,r,s,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,Promise.all([g(),D(),A(),C()]);case 3:t=e.sent,n=Object(O.a)(t,4),c=n[0],r=n[1],s=n[2],i=n[3],d(c),f(r),E(i),w(s),a(!1);case 14:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var U=Object(c.useCallback)(function(){var e=Object(x.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,N(t);case 3:d(t),a(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),F=Object(c.useCallback)(function(){var e=Object(x.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:w(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(l.jsx)(v.Provider,{value:{loading:s,user:j,setUser:U,cart:h,checkout:I,userPhoto:k,setUserPhoto:F,productList:M},children:t})};function C(){return k.apply(this,arguments)}function k(){return(k=Object(x.a)(Object(p.a)().mark((function e(){var t,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/data.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.products);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return w.apply(this,arguments)}function w(){return(w=Object(x.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.getUserDetails());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return(S=Object(x.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.updateUserDetails(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return P.apply(this,arguments)}function P(){return(P=Object(x.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.getCart());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.checkoutResult(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return E.apply(this,arguments)}function E(){return(E=Object(x.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getUserPicture();case 2:return t=e.sent,e.abrupt("return",t.picture);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.setUserPicture({picture:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"],L=(n(78),function(e){var t=e.match.params.id,n=Object(c.useContext)(v),r=n.user,s=n.setUser,a=Object(c.useState)(),o=Object(O.a)(a,2),j=o[0],d=o[1],p=Object(i.J)(),x=Object(O.a)(p,1)[0],f=Object(i.K)();Object(c.useEffect)((function(){if(r)if(t){var e=r.addresses.find((function(e){return e.id===Number(t)}));d(e)}else d({id:0,city:"",postal:"",state:"",street:"",preferred:!1})}),[t,r]);var m=function(){x({buttons:[{text:"Confirm",handler:function(e){j&&d(Object(b.a)(Object(b.a)({},j),{},{state:e.StateCode.value}))}}],columns:[{name:"StateCode",options:F.map((function(e){return{text:e,value:e}})),selectedIndex:F.findIndex((function(e){return e===(null===j||void 0===j?void 0:j.state)}))}]})};return r&&j?Object(l.jsxs)(i.t,{children:[Object(l.jsx)(i.l,{children:Object(l.jsxs)(i.z,{children:[Object(l.jsxs)(i.y,{children:[0===j.id?"Add":"Edit"," Address"]}),Object(l.jsx)(i.d,{slot:"start",children:Object(l.jsx)(i.b,{text:"Cancel"})})]})}),Object(l.jsxs)(i.h,{children:[Object(l.jsxs)(i.o,{lines:"full",children:[Object(l.jsx)(i.p,{position:"fixed",children:"Full Name"}),Object(l.jsx)(i.n,{placeholder:"",disabled:!0,value:"".concat(null===r||void 0===r?void 0:r.firstName," ").concat(null===r||void 0===r?void 0:r.lastName).trim()})]}),Object(l.jsxs)(i.o,{lines:"full",children:[Object(l.jsx)(i.p,{position:"fixed",children:"Address"}),Object(l.jsx)(i.n,{placeholder:"",debounce:500,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{street:e.detail.value}))},value:j.street})]}),Object(l.jsxs)(i.o,{lines:"full",children:[Object(l.jsx)(i.p,{position:"fixed",children:"Zip Code"}),Object(l.jsx)(i.n,{placeholder:"",type:"number",pattern:"[0-9]*",debounce:500,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{postal:e.detail.value}))},value:j.postal})]}),Object(l.jsxs)(i.o,{lines:"full",children:[Object(l.jsx)(i.p,{position:"fixed",children:"City"}),Object(l.jsx)(i.n,{placeholder:"",debounce:500,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{city:e.detail.value}))},value:j.city})]}),Object(l.jsxs)(i.o,{lines:"full",children:[Object(l.jsx)(i.p,{position:"fixed",children:"State"}),Object(l.jsx)(i.n,{placeholder:"",onClick:m,value:j.state}),Object(l.jsx)(i.c,{color:"light",fill:"clear",expand:"block",onClick:m,children:Object(l.jsx)(i.m,{slot:"icon-only",icon:h.e})})]}),Object(l.jsxs)(i.o,{lines:"none",children:[Object(l.jsx)(i.e,{checked:j.preferred,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{preferred:!j.preferred}))}}),Object(l.jsx)(i.x,{children:"Set as default address"})]}),Object(l.jsx)(i.c,{expand:"block",onClick:function(){var e;r&&j&&(0===j.id?(j.id=(r.addresses.length>0?Math.max.apply(Math,Object(u.a)(r.addresses.map((function(e){return e.id})))):0)+1,e=Object(b.a)(Object(b.a)({},r),{},{addresses:[].concat(Object(u.a)(r.addresses),[j])})):e=Object(b.a)(Object(b.a)({},r),{},{addresses:Object(u.a)(r.addresses.map((function(e){return e.id===j.id?j:e})))}),j.preferred&&e.addresses.forEach((function(e){e.id!==j.id&&(e.preferred=!1)})),s(e),f.canGoBack()&&f.goBack())},children:"Save"})]})]}):null}),R=(n(79),function(e){var t=e.address,n=e.onAddressSelected,c=void 0===n?function(){}:n,r=e.selectable,s=void 0===r||r,a=e.selectedId,o=e.user,j=Object(i.K)();return Object(l.jsxs)(i.o,{button:!0,detail:!1,onClick:function(){t.id!==a&&c(t)},children:[s&&Object(l.jsx)(i.e,{slot:"start",checked:t.id===a}),Object(l.jsxs)(i.p,{className:"ion-text-wrap",children:[o.firstName," ",o.lastName," ",Object(l.jsx)("br",{}),t.street," ",Object(l.jsx)("br",{}),t.city,", ",t.state," ",t.postal]}),t.preferred&&Object(l.jsx)(i.f,{color:"success",children:"Default"}),Object(l.jsx)(i.c,{fill:"clear",slot:"end",onClick:function(e){e.stopPropagation(),j.push("/address/".concat(t.id))},children:"Edit"})]})}),T=function(e){var t=e.creditCard,n=e.onPaymentSelected,c=void 0===n?function(){}:n,r=e.selectable,s=void 0===r||r,a=e.selectedId,o=Object(i.K)();return Object(l.jsxs)(i.o,{button:!0,detail:!1,onClick:function(){t.id!==a&&c(t)},children:[s&&Object(l.jsx)(i.e,{slot:"start",checked:t.id===a}),Object(l.jsxs)(i.p,{className:"ion-text-wrap",children:[t.company," ending in ",t.number.slice(-4)]}),Object(l.jsx)(i.c,{fill:"clear",slot:"end",onClick:function(e){e.stopPropagation(),o.push("/payment/".concat(t.id))},children:"Edit"})]},t.id)},q=n(26),z=n(147),B=(n(80),function(e){var t=e.isLoaded,n=e.children;return Object(l.jsx)(z.a,{in:t,timeout:500,classNames:"fade-in",children:n})}),K=function(){var e=Object(c.useContext)(v),t=e.cart,n=e.user,r=e.checkout,s=Object(c.useState)(),a=Object(O.a)(s,2),o=a[0],j=a[1],d=Object(c.useState)(),u=Object(O.a)(d,2),b=u[0],h=u[1],p=Object(i.K)();return Object(c.useEffect)((function(){if(n&&!o){var e=n.addresses.find((function(e){return e.preferred}));e&&j(e)}if(n&&!b){var t=n.creditCards.find((function(e){return e.preferred}));t&&h(t)}}),[o,b,n]),Object(l.jsxs)(i.t,{id:"checkout-page",children:[Object(l.jsx)(i.l,{children:Object(l.jsxs)(i.z,{children:[Object(l.jsx)(i.d,{slot:"start",children:Object(l.jsx)(i.c,{onClick:function(){q.a.publish({topic:"dismiss",data:"cancel"})},children:"Cancel"})}),Object(l.jsx)(i.y,{children:"Checkout"})]})}),Object(l.jsx)(B,{isLoaded:null!=n&&null!=t,children:Object(l.jsx)(i.h,{className:"ion-padding",children:t&&n&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(i.q,{lines:"none",children:[Object(l.jsx)(i.r,{children:"Delivery"}),n.addresses.map((function(e){return Object(l.jsx)(R,{address:e,onAddressSelected:function(e){return j(e)},selectedId:null===o||void 0===o?void 0:o.id,user:n},e.id)}))]}),Object(l.jsx)(i.c,{expand:"block",color:"secondary",onClick:function(){return p.push("/address")},children:"New Address"}),Object(l.jsxs)(i.q,{lines:"none",children:[Object(l.jsx)(i.r,{children:"Payment"}),n.creditCards.map((function(e){return Object(l.jsx)(T,{creditCard:e,selectedId:null===b||void 0===b?void 0:b.id,onPaymentSelected:function(e){return h(e)},selectable:!0},e.id)}))]}),Object(l.jsx)(i.c,{expand:"block",color:"secondary",onClick:function(){return p.push("/payment")},children:"New Payment Method"}),Object(l.jsxs)(i.q,{lines:"none",children:[Object(l.jsx)(i.r,{children:"Review total"}),Object(l.jsx)(i.o,{children:Object(l.jsxs)(i.p,{children:["$",t.subTotal," + Tax"]})})]}),Object(l.jsx)(i.c,{className:"order-button",expand:"block",onClick:function(){var e="success";r({result:e}),q.a.publish({topic:"dismiss",data:e})},children:"Place Your Order"})]})})})]})},V=(n(81),function(){var e=Object(c.useContext)(v),t=e.cart,n=e.user;return Object(l.jsx)(i.t,{id:"cart-total-page",children:Object(l.jsx)(B,{isLoaded:null!=n&&null!=t,children:Object(l.jsx)(i.h,{children:t&&n&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(i.q,{lines:"none",children:[Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Subtotal"}),Object(l.jsxs)(i.s,{slot:"end",children:["$",t.subTotal]})]}),Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Shipping"}),Object(l.jsx)(i.s,{slot:"end",children:"Standard - Free"})]}),Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Estimated total"}),Object(l.jsxs)(i.s,{slot:"end",children:["$",t.subTotal]})]})]}),Object(l.jsx)(i.c,{className:"checkout-button",expand:"block",onClick:function(){q.a.publish({topic:"showCheckout"})},children:"Checkout"})]})})})})}),Y=(n(82),function(){return Object(l.jsx)(i.t,{id:"help-page",children:Object(l.jsx)(B,{isLoaded:!0,children:Object(l.jsxs)(i.h,{children:[Object(l.jsx)(i.o,{lines:"none",children:Object(l.jsx)("h1",{children:"Get Assistance"})}),Object(l.jsx)(i.o,{lines:"none",children:Object(l.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."})}),Object(l.jsx)(i.o,{lines:"none",children:Object(l.jsxs)("a",{className:"help-link",href:"mailto:help@portals.ionic.io",children:[Object(l.jsx)(i.m,{slot:"icon-only",icon:h.k}),"help@portals.ionic.io"]})}),Object(l.jsx)(i.o,{lines:"none",children:Object(l.jsxs)("a",{className:"help-link",href:"tel:1-800-767-8257",children:[Object(l.jsx)(i.m,{slot:"icon-only",icon:h.c}),"1-800-PORTALS"]})})]})})})}),H=(n(83),function(e){var t=e.match.params.id,n=Object(c.useContext)(v),r=n.user,s=n.setUser,a=Object(c.useState)(),o=Object(O.a)(a,2),j=o[0],d=o[1],h=Object(i.K)();Object(c.useEffect)((function(){if(r)if(t){var e=r.creditCards.find((function(e){return e.id===Number(t)}));d(e)}else d({id:0,company:"Visa",cvv:"",expirationDate:"",number:"",zip:"",preferred:!1})}),[t,r]);var p=Object(c.useMemo)((function(){if(j){var e=new Date(j.expirationDate);return"".concat(e.getMonth(),"/").concat(e.getFullYear())}}),[j]);return r&&j?Object(l.jsxs)(i.t,{children:[Object(l.jsx)(i.l,{children:Object(l.jsxs)(i.z,{children:[Object(l.jsxs)(i.y,{children:[0===j.id?"Add":"Edit"," Payment Method"]}),Object(l.jsx)(i.d,{slot:"start",children:Object(l.jsx)(i.b,{text:"Cancel"})})]})}),Object(l.jsxs)(i.h,{className:"ion-padding",children:[Object(l.jsxs)(i.q,{children:[j.id>0?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(i.o,{lines:"none",children:Object(l.jsx)(i.x,{slot:"start",children:j.company})}),Object(l.jsxs)(i.o,{lines:"none",children:[Object(l.jsx)(i.x,{slot:"start",children:"Card last 4 digits"}),Object(l.jsx)(i.x,{slot:"end",children:j.number.slice(-4)})]}),Object(l.jsxs)(i.o,{lines:"none",children:[Object(l.jsx)(i.p,{slot:"start",children:"Card exp date"}),Object(l.jsx)(i.x,{slot:"end",children:p})]})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(i.o,{lines:"none",children:[Object(l.jsx)(i.p,{position:"stacked",children:"Card Number"}),Object(l.jsx)(i.n,{type:"number",pattern:"[0-9]*",maxlength:16,placeholder:"Card Number",onIonFocus:function(){r&&d(Object(b.a)(Object(b.a)({},j),{},{number:""}))},onIonBlur:function(e){var t=e.target.value;t.includes("*")||d(Object(b.a)(Object(b.a)({},j),{},{number:t}))},value:j.number})]}),Object(l.jsx)(i.o,{lines:"none",children:Object(l.jsx)(i.k,{children:Object(l.jsxs)(i.w,{children:[Object(l.jsxs)(i.g,{children:[Object(l.jsx)(i.p,{position:"stacked",children:"Exp Date"}),Object(l.jsx)(i.i,{displayFormat:"MM/YYYY",min:(new Date).toISOString(),max:"2031",placeholder:"Exp Date",value:j.expirationDate,onIonChange:function(e){return d(Object(b.a)(Object(b.a)({},j),{},{expirationDate:e.detail.value}))}})]}),Object(l.jsxs)(i.g,{children:[Object(l.jsx)(i.p,{position:"stacked",children:"CVV"}),Object(l.jsx)(i.n,{placeholder:"CVV",type:"number",pattern:"[0-9]*",maxlength:4,debounce:500,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{cvv:e.detail.value}))},value:j.cvv})]})]})})})]}),Object(l.jsxs)(i.o,{lines:"none",children:[Object(l.jsx)(i.p,{position:"stacked",children:"Zip Code"}),Object(l.jsx)(i.n,{placeholder:"Zip Code",type:"number",pattern:"[0-9]*",maxlength:5,debounce:500,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{zip:e.detail.value}))},value:j.zip})]}),Object(l.jsxs)(i.o,{lines:"none",children:[Object(l.jsx)(i.e,{checked:j.preferred,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{preferred:!j.preferred}))}}),Object(l.jsx)(i.x,{children:"Set as default payment method"})]})]}),Object(l.jsx)(i.c,{expand:"block",onClick:function(){var e;r&&j&&(0===j.id?(j.id=(r.creditCards.length>0?Math.max.apply(Math,Object(u.a)(r.creditCards.map((function(e){return e.id})))):0)+1,e=Object(b.a)(Object(b.a)({},r),{},{creditCards:[].concat(Object(u.a)(r.creditCards),[j])}),s(e)):(e=Object(b.a)(Object(b.a)({},r),{},{creditCards:Object(u.a)(r.creditCards.map((function(e){return e.id===j.id?j:e})))}),s(e)),j.preferred&&e.creditCards.forEach((function(e){e.id!==j.id&&(e.preferred=!1)})),h.canGoBack()&&h.goBack())},children:"Save"})]})]}):null}),J=n(41),W=(n(84),n(56)),G=(n(85),function(e){var t=e.image,n=e.onCropComplete,r=e.closeModal,s=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=s.current;if(e)return e.addEventListener("crop",a),function(){e.removeEventListener("crop",a)}}),[s]);var a=function(e){var t=s.current,n=null===t||void 0===t?void 0:t.cropper,c=n.getCanvasData(),r=n.getCropBoxData(),a=c.left+c.width,i=c.top+c.height,o=r.left+r.width,j=r.top+r.height;c.width<r.width?(n.setCanvasData(Object(b.a)(Object(b.a)({},c),{},{width:r.width+.2})),e.preventDefault()):c.height<r.height?(n.setCanvasData(Object(b.a)(Object(b.a)({},c),{},{height:r.height+.2})),e.preventDefault()):c.left>r.left?(n.setCanvasData(Object(b.a)(Object(b.a)({},c),{},{left:r.left-.2})),e.preventDefault()):c.top>r.top?(n.setCanvasData(Object(b.a)(Object(b.a)({},c),{},{top:r.top-.2})),e.preventDefault()):a<o?(n.setCanvasData(Object(b.a)(Object(b.a)({},c),{},{left:o-c.width+.2})),e.preventDefault()):i<j&&(n.setCanvasData(Object(b.a)(Object(b.a)({},c),{},{top:j-c.height+.2})),e.preventDefault())};return Object(l.jsxs)(i.t,{children:[Object(l.jsx)(i.l,{children:Object(l.jsx)(i.z,{children:Object(l.jsx)(i.y,{children:"Adjust Image"})})}),Object(l.jsxs)(i.h,{children:[Object(l.jsx)(W.a,{src:t,ref:s,initialAspectRatio:1,guides:!0,aspectRatio:1,allowTransparency:!1,background:!1,dragMode:"move",movable:!0,autoCropArea:.9,cropBoxMovable:!1,cropBoxResizable:!1}),Object(l.jsxs)(i.z,{children:[Object(l.jsx)(i.d,{slot:"primary",children:Object(l.jsx)(i.c,{onClick:function(){var e=null===s||void 0===s?void 0:s.current,t=null===e||void 0===e?void 0:e.cropper;n(t.getCroppedCanvas().toDataURL())},children:"Done"})}),Object(l.jsx)(i.d,{slot:"secondary",children:Object(l.jsx)(i.c,{onClick:r,children:"Cancel"})})]})]}),Object(l.jsx)(i.j,{})]})});function Z(){return $.apply(this,arguments)}function $(){return($=Object(x.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.getPhoto({quality:100,width:300,direction:J.b.Front,resultType:J.c.Uri});case 2:return t=e.sent,e.abrupt("return",t.webPath);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X,Q,ee=function(){var e=Object(c.useContext)(v),t=e.user,n=e.setUser,r=e.userPhoto,s=e.setUserPhoto,a=Object(c.useState)(),o=Object(O.a)(a,2),j=o[0],d=o[1],u=Object(c.useState)(),f=Object(O.a)(u,2),m=f[0],y=f[1],C=Object(i.K)(),k=Object(i.I)(Object(l.jsx)(G,{image:m,onCropComplete:function(e){s(e),y(void 0),N()},closeModal:function(){return N()}})),g=Object(O.a)(k,2),w=g[0],N=g[1];Object(c.useEffect)((function(){t&&r&&!j&&d({firstName:t.firstName,lastName:t.lastName,email:t.email})}),[j,t,r]);var S=Object(c.useCallback)((function(){t&&j&&n(Object(b.a)(Object(b.a)({},t),j))}),[t,j,n]),D=function(){var e=Object(x.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:t=e.sent,y(t),w();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(i.t,{id:"user-detail-page",children:[Object(l.jsx)(i.l,{children:Object(l.jsx)(i.z,{children:Object(l.jsx)(i.y,{children:"Profile"})})}),Object(l.jsx)(B,{isLoaded:null!=t&&null!=j,children:Object(l.jsxs)(i.h,{children:[Object(l.jsx)(i.l,{collapse:"condense",children:Object(l.jsx)(i.z,{children:Object(l.jsx)(i.y,{size:"large",children:"Profile"})})}),t&&j&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"user-image",onClick:D,children:[Object(l.jsx)("img",{src:r,alt:"".concat(t.firstName," ").concat(t.lastName)}),Object(l.jsx)(i.m,{icon:h.a})]}),Object(l.jsxs)("div",{className:"user-info",children:[Object(l.jsxs)(i.q,{lines:"full",children:[Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"First name"}),Object(l.jsx)(i.n,{value:j.firstName,onIonChange:function(e){var t=e.detail.value;t&&d(Object(b.a)(Object(b.a)({},j),{},{firstName:t}))},onBlur:S})]}),Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Last name"}),Object(l.jsx)(i.n,{value:j.lastName,onIonChange:function(e){var t=e.detail.value;t&&d(Object(b.a)(Object(b.a)({},j),{},{lastName:t}))},onBlur:S})]}),Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Email Address"}),Object(l.jsx)(i.n,{value:j.email,onIonChange:function(e){d(Object(b.a)(Object(b.a)({},j),{},{email:e.detail.value}))},onBlur:S})]})]}),Object(l.jsxs)("div",{className:"list-section",children:[Object(l.jsxs)(i.q,{lines:"none",children:[Object(l.jsx)(i.r,{children:"Addresses"}),t.addresses.map((function(e){return Object(l.jsx)(R,{address:e,selectable:!1,user:t},e.id)}))]}),Object(l.jsx)(i.c,{expand:"block",color:"secondary",onClick:function(){return C.push("/address")},children:"New Address"})]})]}),Object(l.jsxs)("div",{className:"list-section",children:[Object(l.jsx)("h4",{children:"Payment Methods"}),Object(l.jsx)(i.q,{lines:"none",children:t.creditCards.map((function(e){return Object(l.jsx)(T,{creditCard:e,selectable:!1},e.id)}))}),Object(l.jsx)(i.c,{expand:"block",color:"secondary",onClick:function(){return C.push("/payment")},children:"New Payment Method"})]})]})]})})]})},te=(n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),function(){var e=Object(c.useState)("sayHi"),t=Object(O.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),a=Object(O.a)(s,2),o=a[0],j=a[1],d=Object(c.useState)(""),u=Object(O.a)(d,2),b=u[0],h=u[1],f=Object(c.useState)(),m=Object(O.a)(f,2),v=m[0],y=m[1],C=function(){var e=Object(x.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.subscribe({topic:n},(function(e){y(e)}));case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.a.unsubscribe(o);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(""),q.a.publish({topic:n,data:{message:b}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsx)(i.t,{id:"help-page",children:Object(l.jsxs)(i.h,{children:[Object(l.jsxs)(i.q,{children:[Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Topic"}),Object(l.jsx)(i.n,{value:n,onIonChange:function(e){return r(e.detail.value)}})]}),Object(l.jsxs)(i.o,{children:[Object(l.jsx)(i.p,{children:"Message"}),Object(l.jsx)(i.n,{value:b,onIonChange:function(e){return h(e.detail.value)}})]})]}),Object(l.jsx)(i.c,{expand:"block",onClick:C,children:"Subscribe"}),Object(l.jsx)(i.c,{expand:"block",disabled:!o,onClick:k,children:"Unsubscribe"}),Object(l.jsx)(i.c,{expand:"block",onClick:g,children:"Publish"}),"portalSubscription: ",Object(l.jsx)("br",{}),JSON.stringify(o),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),"messageFromApp: ",Object(l.jsx)("br",{}),JSON.stringify(v)]})})}),ne=function(e){var t=e.context;return Object(l.jsx)(y,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(i.v,{children:[null!==t&&void 0!==t&&t.startingRoute?Object(l.jsx)(j.b,{exact:!0,path:"/",children:"/"===t.startingRoute?Object(l.jsx)(d,{}):Object(l.jsx)(j.a,{to:t.startingRoute})}):null,Object(l.jsx)(j.b,{path:"/address",exact:!0,component:L}),Object(l.jsx)(j.b,{path:"/address/:id",exact:!0,component:L}),Object(l.jsx)(j.b,{path:"/checkout",exact:!0,component:K}),Object(l.jsx)(j.b,{path:"/cart-total",exact:!0,component:V}),Object(l.jsx)(j.b,{path:"/help",exact:!0,component:Y}),Object(l.jsx)(j.b,{path:"/payment",exact:!0,component:H}),Object(l.jsx)(j.b,{path:"/payment/:id",component:H}),Object(l.jsx)(j.b,{path:"/user",exact:!0,component:ee}),Object(l.jsx)(j.b,{path:"/pubsub",exact:!0,component:te})]})})})})},ce=null!==(X=null===(Q=Object(q.b)())||void 0===Q?void 0:Q.value)&&void 0!==X?X:{startingRoute:"/"};a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(ne,{context:ce})}),document.getElementById("root"))}},[[97,3,4]]]);
//# sourceMappingURL=main.473e9cbd.chunk.js.map