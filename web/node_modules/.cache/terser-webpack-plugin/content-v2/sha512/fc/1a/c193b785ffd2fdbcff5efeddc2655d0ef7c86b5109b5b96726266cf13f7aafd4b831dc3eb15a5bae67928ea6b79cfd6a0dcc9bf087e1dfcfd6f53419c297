{"code":"(this[\"webpackJsonpportals-ecommerce-demo\"]=this[\"webpackJsonpportals-ecommerce-demo\"]||[]).push([[41],{143:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"CameraWeb\",(function(){return l})),r.d(t,\"Camera\",(function(){return m}));var n=r(3),a=r(5),c=r(8),i=r(9),o=r(11),u=r(12),s=r(22),p=r(51),l=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:\"getPhoto\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise(function(){var e=Object(a.a)(Object(n.a)().mark((function e(c,i){var o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.webUseInput||t.source===p.c.Photos?r.fileInputExperience(t,c):t.source===p.c.Prompt?((o=document.querySelector(\"pwa-action-sheet\"))||(o=document.createElement(\"pwa-action-sheet\"),document.body.appendChild(o)),o.header=t.promptLabelHeader||\"Photo\",o.cancelable=!1,o.options=[{title:t.promptLabelPhoto||\"From Photos\"},{title:t.promptLabelPicture||\"Take Picture\"}],o.addEventListener(\"onSelection\",function(){var e=Object(a.a)(Object(n.a)().mark((function e(a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===a.detail?r.fileInputExperience(t,c):r.cameraExperience(t,c,i);case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):r.cameraExperience(t,c,i);case 1:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"pickImages\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise(function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.multipleFileInputExperience(t);case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"cameraExperience\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r,c){var i,o=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!customElements.get(\"pwa-camera-modal\")){e.next=16;break}return(i=document.createElement(\"pwa-camera-modal\")).facingMode=t.direction===p.a.Front?\"user\":\"environment\",document.body.appendChild(i),e.prev=4,e.next=7,i.componentOnReady();case 7:i.addEventListener(\"onPhoto\",function(){var e=Object(a.a)(Object(n.a)().mark((function e(a){var u;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(u=a.detail)){e.next=5;break}c(new s.a(\"User cancelled photos app\")),e.next=14;break;case 5:if(!(u instanceof Error)){e.next=9;break}c(u),e.next=14;break;case 9:return e.t0=r,e.next=12,o._getCameraPhoto(u,t);case 12:e.t1=e.sent,(0,e.t0)(e.t1);case 14:i.dismiss(),document.body.removeChild(i);case 16:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.present(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.fileInputExperience(t,r);case 14:e.next=18;break;case 16:console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements.\"),this.fileInputExperience(t,r);case 18:case\"end\":return e.stop()}}),e,this,[[4,11]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:\"fileInputExperience\",value:function(e,t){var r=document.querySelector(\"#_capacitor-camera-input\"),n=function(){var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement(\"input\")).id=\"_capacitor-camera-input\",r.type=\"file\",r.hidden=!0,document.body.appendChild(r),r.addEventListener(\"change\",(function(a){var c=r.files[0],i=\"jpeg\";if(\"image/png\"===c.type?i=\"png\":\"image/gif\"===c.type&&(i=\"gif\"),\"dataUrl\"===e.resultType||\"base64\"===e.resultType){var o=new FileReader;o.addEventListener(\"load\",(function(){if(\"dataUrl\"===e.resultType)t({dataUrl:o.result,format:i});else if(\"base64\"===e.resultType){var r=o.result.split(\",\")[1];t({base64String:r,format:i})}n()})),o.readAsDataURL(c)}else t({webPath:URL.createObjectURL(c),format:i}),n()}))),r.accept=\"image/*\",r.capture=!0,e.source===p.c.Photos||e.source===p.c.Prompt?r.removeAttribute(\"capture\"):e.direction===p.a.Front?r.capture=\"user\":e.direction===p.a.Rear&&(r.capture=\"environment\"),r.click()}},{key:\"multipleFileInputExperience\",value:function(e){var t=document.querySelector(\"#_capacitor-camera-input-multiple\");t||((t=document.createElement(\"input\")).id=\"_capacitor-camera-input-multiple\",t.type=\"file\",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener(\"change\",(function(r){for(var n=[],a=0;a<t.files.length;a++){var c=t.files[a],i=\"jpeg\";\"image/png\"===c.type?i=\"png\":\"image/gif\"===c.type&&(i=\"gif\"),n.push({webPath:URL.createObjectURL(c),format:i})}e({photos:n}),function(){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}()}))),t.accept=\"image/*\",t.click()}},{key:\"_getCameraPhoto\",value:function(e,t){return new Promise((function(r,n){var a=new FileReader,c=e.type.split(\"/\")[1];\"uri\"===t.resultType?r({webPath:URL.createObjectURL(e),format:c,saved:!1}):(a.readAsDataURL(e),a.onloadend=function(){var e=a.result;\"dataUrl\"===t.resultType?r({dataUrl:e,format:c,saved:!1}):r({base64String:e.split(\",\")[1],format:c,saved:!1})},a.onerror=function(e){n(e)})}))}},{key:\"checkPermissions\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"undefined\"!==typeof navigator&&navigator.permissions){e.next=2;break}throw this.unavailable(\"Permissions API not available in this browser\");case 2:return e.prev=2,e.next=5,window.navigator.permissions.query({name:\"camera\"});case 5:return t=e.sent,e.abrupt(\"return\",{camera:t.state,photos:\"granted\"});case 9:throw e.prev=9,e.t0=e.catch(2),this.unavailable(\"Camera permissions are not available in this browser\");case 12:case\"end\":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:\"requestPermissions\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unimplemented(\"Not implemented on web.\");case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"pickLimitedLibraryPhotos\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unavailable(\"Not implemented on web.\");case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"getLimitedLibraryPhotos\",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unavailable(\"Not implemented on web.\");case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(s.c),m=new l}}]);","name":"static/js/41.181a37fb.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","CameraWeb","Camera","_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__","_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__","_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__","_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__","_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__","_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__","_capacitor_core__WEBPACK_IMPORTED_MODULE_6__","_definitions__WEBPACK_IMPORTED_MODULE_7__","_WebPlugin","Object","_super","apply","arguments","key","value","_getPhoto","mark","_callee3","options","_this","wrap","_context3","prev","next","abrupt","Promise","_ref","_callee2","resolve","reject","actionSheet","_context2","webUseInput","source","Photos","fileInputExperience","Prompt","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","title","promptLabelPhoto","promptLabelPicture","addEventListener","_ref2","_callee","e","_context","detail","cameraExperience","stop","_x4","_x2","_x3","_x","_pickImages","_callee5","_options","_this2","_context5","_ref3","_callee4","_context4","multipleFileInputExperience","_x6","_x5","_cameraExperience","_callee7","cameraModal","_this3","_context7","customElements","get","facingMode","direction","Front","componentOnReady","_ref4","_callee6","photo","_context6","Error","t0","_getCameraPhoto","t1","sent","dismiss","removeChild","_x10","present","console","error","_x7","_x8","_x9","input","cleanup","_a","parentNode","id","type","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","Rear","click","multiple","photos","i","length","saved","onloadend","onerror","_checkPermissions","_callee8","permission","_context8","navigator","permissions","unavailable","window","query","name","camera","state","_requestPermissions","_callee9","_context9","unimplemented","_pickLimitedLibraryPhotos","_callee10","_context10","_getLimitedLibraryPhotos","_callee11","_context11"],"sources":["static/js/41.181a37fb.chunk.js"],"mappings":"CAACA,KAAK,sCAAwCA,KAAK,uCAAyC,IAAIC,KAAK,CAAC,CAAC,IAAI,CAErG,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,aAAa,WAAa,OAAOI,CAAW,IACvFH,EAAoBE,EAAEH,EAAqB,UAAU,WAAa,OAAOK,CAAQ,IAC3F,IAAIC,EAAsJL,EAAoB,GAC1KM,EAAoJN,EAAoB,GACxKO,EAAkJP,EAAoB,GACtKQ,EAA+IR,EAAoB,GACnKS,EAA4IT,EAAoB,IAChKU,EAA+IV,EAAoB,IACnKW,EAA+CX,EAAoB,IACnEY,EAA4CZ,EAAoB,IASrFG,EAAyB,SAAUU,GACrCC,OAAOL,EAA2J,EAAlKK,CAAqKX,EAAWU,GAChL,IAAIE,EAASD,OAAOJ,EAA8J,EAArKI,CAAwKX,GACrL,SAASA,IAEP,OADAW,OAAOP,EAAiK,EAAxKO,CAA2KlB,KAAMO,GAC1KY,EAAOC,MAAMpB,KAAMqB,UAC5B,CAqcA,OApcAH,OAAON,EAA8J,EAArKM,CAAwKX,EAAW,CAAC,CAClLe,IAAK,WACLC,MAAO,WACL,IAAIC,EAAYN,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASC,EAASC,GACjZ,IAAIC,EAAQ5B,KACZ,OAAOkB,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmBC,GAC9M,OACE,OAAQA,EAAUC,KAAOD,EAAUE,MACjC,KAAK,EACH,OAAOF,EAAUG,OAAO,SAAU,IAAIC,QAAsB,WAC1D,IAAIC,EAAOjB,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASW,EAASC,EAASC,GACrZ,IAAIC,EACJ,OAAOrB,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmBW,GAC9M,OACE,OAAQA,EAAUT,KAAOS,EAAUR,MACjC,KAAK,EACCL,EAAQc,aAAed,EAAQe,SAAW1B,EAAgE,EAAE2B,OAC9Gf,EAAMgB,oBAAoBjB,EAASU,GAC1BV,EAAQe,SAAW1B,EAAgE,EAAE6B,SAC9FN,EAAcO,SAASC,cAAc,uBAEnCR,EAAcO,SAASE,cAAc,oBACrCF,SAASG,KAAKC,YAAYX,IAE5BA,EAAYY,OAASxB,EAAQyB,mBAAqB,QAClDb,EAAYc,YAAa,EACzBd,EAAYZ,QAAU,CAAC,CACrB2B,MAAO3B,EAAQ4B,kBAAoB,eAClC,CACDD,MAAO3B,EAAQ6B,oBAAsB,iBAEvCjB,EAAYkB,iBAAiB,cAA4B,WACvD,IAAIC,EAAQxC,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASkC,EAAQC,GAE5Y,OAAO1C,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAkBgC,GAC7M,OACE,OAAQA,EAAS9B,KAAO8B,EAAS7B,MAC/B,KAAK,EAEe,IADN4B,EAAEE,OAEZlC,EAAMgB,oBAAoBjB,EAASU,GAEnCT,EAAMmC,iBAAiBpC,EAASU,EAASC,GAE7C,KAAK,EACL,IAAK,MACH,OAAOuB,EAASG,OAGxB,GAAGL,EACL,KACA,OAAO,SAAUM,GACf,OAAOP,EAAMtC,MAAMpB,KAAMqB,UAC3B,CACF,CAvByD,KAyBzDO,EAAMmC,iBAAiBpC,EAASU,EAASC,GAE7C,KAAK,EACL,IAAK,MACH,OAAOE,EAAUwB,OAGzB,GAAG5B,EACL,KACA,OAAO,SAAU8B,EAAKC,GACpB,OAAOhC,EAAKf,MAAMpB,KAAMqB,UAC1B,CACF,CA3D4D,KA4D9D,KAAK,EACL,IAAK,MACH,OAAOS,EAAUkC,OAGzB,GAAGtC,EACL,KAIA,OAHA,SAAkB0C,GAChB,OAAO5C,EAAUJ,MAAMpB,KAAMqB,UAC/B,CAEF,CA9EO,IA+EN,CACDC,IAAK,aACLC,MAAO,WACL,IAAI8C,EAAcnD,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAAS6C,EAASC,GACnZ,IAAIC,EAASxE,KACb,OAAOkB,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmB4C,GAC9M,OACE,OAAQA,EAAU1C,KAAO0C,EAAUzC,MACjC,KAAK,EACH,OAAOyC,EAAUxC,OAAO,SAAU,IAAIC,QAAsB,WAC1D,IAAIwC,EAAQxD,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASkD,EAAStC,GAC7Y,OAAOnB,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmB+C,GAC9M,OACE,OAAQA,EAAU7C,KAAO6C,EAAU5C,MACjC,KAAK,EACHwC,EAAOK,4BAA4BxC,GACrC,KAAK,EACL,IAAK,MACH,OAAOuC,EAAUZ,OAGzB,GAAGW,EACL,KACA,OAAO,SAAUG,GACf,OAAOJ,EAAMtD,MAAMpB,KAAMqB,UAC3B,CACF,CAjB4D,KAkB9D,KAAK,EACL,IAAK,MACH,OAAOoD,EAAUT,OAGzB,GAAGM,EACL,KAIA,OAHA,SAAoBS,GAClB,OAAOV,EAAYjD,MAAMpB,KAAMqB,UACjC,CAEF,CApCO,IAqCN,CACDC,IAAK,mBACLC,MAAO,WACL,IAAIyD,EAAoB9D,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASwD,EAAStD,EAASU,EAASC,GAC3a,IACI4C,EADAC,EAASnF,KAEb,OAAOkB,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmBuD,GAC9M,OACE,OAAQA,EAAUrD,KAAOqD,EAAUpD,MACjC,KAAK,EACH,IAAKqD,eAAeC,IAAI,oBAAqB,CAC3CF,EAAUpD,KAAO,GACjB,KACF,CAMA,OALAkD,EAAcpC,SAASE,cAAc,qBACzBuC,WAAa5D,EAAQ6D,YAAcxE,EAAmE,EAAEyE,MAAQ,OAAS,cACrI3C,SAASG,KAAKC,YAAYgC,GAC1BE,EAAUrD,KAAO,EACjBqD,EAAUpD,KAAO,EACVkD,EAAYQ,mBACrB,KAAK,EACHR,EAAYzB,iBAAiB,UAAwB,WACnD,IAAIkC,EAAQzE,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASmE,EAAShC,GAC7Y,IAAIiC,EACJ,OAAO3E,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmBiE,GAC9M,OACE,OAAQA,EAAU/D,KAAO+D,EAAU9D,MACjC,KAAK,EAEH,GAAgB,QADhB6D,EAAQjC,EAAEE,QACa,CACrBgC,EAAU9D,KAAO,EACjB,KACF,CACAM,EAAO,IAAIvB,EAAyE,EAAE,8BACtF+E,EAAU9D,KAAO,GACjB,MACF,KAAK,EACH,KAAM6D,aAAiBE,OAAQ,CAC7BD,EAAU9D,KAAO,EACjB,KACF,CACAM,EAAOuD,GACPC,EAAU9D,KAAO,GACjB,MACF,KAAK,EAGH,OAFA8D,EAAUE,GAAK3D,EACfyD,EAAU9D,KAAO,GACVmD,EAAOc,gBAAgBJ,EAAOlE,GACvC,KAAK,GACHmE,EAAUI,GAAKJ,EAAUK,MACzB,EAAIL,EAAUE,IAAIF,EAAUI,IAC9B,KAAK,GACHhB,EAAYkB,UACZtD,SAASG,KAAKoD,YAAYnB,GAC5B,KAAK,GACL,IAAK,MACH,OAAOY,EAAU9B,OAGzB,GAAG4B,EACL,KACA,OAAO,SAAUU,GACf,OAAOX,EAAMvE,MAAMpB,KAAMqB,UAC3B,CACF,CA3CqD,IA4CrD6D,EAAYqB,UACZnB,EAAUpD,KAAO,GACjB,MACF,KAAK,GACHoD,EAAUrD,KAAO,GACjBqD,EAAUY,GAAKZ,EAAiB,MAAE,GAClCpF,KAAK4C,oBAAoBjB,EAASU,GACpC,KAAK,GACH+C,EAAUpD,KAAO,GACjB,MACF,KAAK,GACHwE,QAAQC,MAAM,+GACdzG,KAAK4C,oBAAoBjB,EAASU,GACpC,KAAK,GACL,IAAK,MACH,OAAO+C,EAAUpB,OAGzB,GAAGiB,EAAUjF,KAAM,CAAC,CAAC,EAAG,KAC1B,KAIA,OAHA,SAA0B0G,EAAKC,EAAKC,GAClC,OAAO5B,EAAkB5D,MAAMpB,KAAMqB,UACvC,CAEF,CAvFO,IAwFN,CACDC,IAAK,sBACLC,MAAO,SAA6BI,EAASU,GAC3C,IAAIwE,EAAQ/D,SAASC,cAAc,4BAC/B+D,EAAU,WACZ,IAAIC,EACwB,QAA3BA,EAAKF,EAAMG,kBAA+B,IAAPD,GAAyBA,EAAGV,YAAYQ,EAC9E,EACKA,KACHA,EAAQ/D,SAASE,cAAc,UACzBiE,GAAK,0BACXJ,EAAMK,KAAO,OACbL,EAAMM,QAAS,EACfrE,SAASG,KAAKC,YAAY2D,GAC1BA,EAAMpD,iBAAiB,UAAU,SAAU2D,GACzC,IAAIC,EAAOR,EAAMS,MAAM,GACnBC,EAAS,OAMb,GALkB,cAAdF,EAAKH,KACPK,EAAS,MACc,cAAdF,EAAKH,OACdK,EAAS,OAEgB,YAAvB5F,EAAQ6F,YAAmD,WAAvB7F,EAAQ6F,WAAyB,CACvE,IAAIC,EAAS,IAAIC,WACjBD,EAAOhE,iBAAiB,QAAQ,WAC9B,GAA2B,YAAvB9B,EAAQ6F,WACVnF,EAAQ,CACNsF,QAASF,EAAOG,OAChBL,OAAQA,SAEL,GAA2B,WAAvB5F,EAAQ6F,WAAyB,CAC1C,IAAIK,EAAMJ,EAAOG,OAAOE,MAAM,KAAK,GACnCzF,EAAQ,CACN0F,aAAcF,EACdN,OAAQA,GAEZ,CACAT,GACF,IACAW,EAAOO,cAAcX,EACvB,MACEhF,EAAQ,CACN4F,QAASC,IAAIC,gBAAgBd,GAC7BE,OAAQA,IAEVT,GAEJ,KAEFD,EAAMuB,OAAS,UACfvB,EAAMwB,SAAU,EACZ1G,EAAQe,SAAW1B,EAAgE,EAAE2B,QAAUhB,EAAQe,SAAW1B,EAAgE,EAAE6B,OACtLgE,EAAMyB,gBAAgB,WACb3G,EAAQ6D,YAAcxE,EAAmE,EAAEyE,MACpGoB,EAAMwB,QAAU,OACP1G,EAAQ6D,YAAcxE,EAAmE,EAAEuH,OACpG1B,EAAMwB,QAAU,eAElBxB,EAAM2B,OACR,GACC,CACDlH,IAAK,8BACLC,MAAO,SAAqCc,GAC1C,IAAIwE,EAAQ/D,SAASC,cAAc,qCAK9B8D,KACHA,EAAQ/D,SAASE,cAAc,UACzBiE,GAAK,mCACXJ,EAAMK,KAAO,OACbL,EAAMM,QAAS,EACfN,EAAM4B,UAAW,EACjB3F,SAASG,KAAKC,YAAY2D,GAC1BA,EAAMpD,iBAAiB,UAAU,SAAU2D,GAGzC,IAFA,IAAIsB,EAAS,GAEJC,EAAI,EAAGA,EAAI9B,EAAMS,MAAMsB,OAAQD,IAAK,CAC3C,IAAItB,EAAOR,EAAMS,MAAMqB,GACnBpB,EAAS,OACK,cAAdF,EAAKH,KACPK,EAAS,MACc,cAAdF,EAAKH,OACdK,EAAS,OAEXmB,EAAOzI,KAAK,CACVgI,QAASC,IAAIC,gBAAgBd,GAC7BE,OAAQA,GAEZ,CACAlF,EAAQ,CACNqG,OAAQA,IA5BA,WACZ,IAAI3B,EACwB,QAA3BA,EAAKF,EAAMG,kBAA+B,IAAPD,GAAyBA,EAAGV,YAAYQ,EAC9E,CA2BIC,EACF,KAEFD,EAAMuB,OAAS,UACfvB,EAAM2B,OACR,GACC,CACDlH,IAAK,kBACLC,MAAO,SAAyBsE,EAAOlE,GACrC,OAAO,IAAIO,SAAQ,SAAUG,EAASC,GACpC,IAAImF,EAAS,IAAIC,WACbH,EAAS1B,EAAMqB,KAAKY,MAAM,KAAK,GACR,QAAvBnG,EAAQ6F,WACVnF,EAAQ,CACN4F,QAASC,IAAIC,gBAAgBtC,GAC7B0B,OAAQA,EACRsB,OAAO,KAGTpB,EAAOO,cAAcnC,GACrB4B,EAAOqB,UAAY,WACjB,IAAIzI,EAAIoH,EAAOG,OACY,YAAvBjG,EAAQ6F,WACVnF,EAAQ,CACNsF,QAAStH,EACTkH,OAAQA,EACRsB,OAAO,IAGTxG,EAAQ,CACN0F,aAAc1H,EAAEyH,MAAM,KAAK,GAC3BP,OAAQA,EACRsB,OAAO,GAGb,EACApB,EAAOsB,QAAU,SAAUnF,GACzBtB,EAAOsB,EACT,EAEJ,GACF,GACC,CACDtC,IAAK,mBACLC,MAAO,WACL,IAAIyH,EAAoB9H,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASwH,IAChZ,IAAIC,EACJ,OAAOhI,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmBsH,GAC9M,OACE,OAAQA,EAAUpH,KAAOoH,EAAUnH,MACjC,KAAK,EACH,GAA2B,qBAAdoH,WAA8BA,UAAUC,YAAc,CACjEF,EAAUnH,KAAO,EACjB,KACF,CACA,MAAMhC,KAAKsJ,YAAY,iDACzB,KAAK,EAGH,OAFAH,EAAUpH,KAAO,EACjBoH,EAAUnH,KAAO,EACVuH,OAAOH,UAAUC,YAAYG,MAAM,CACxCC,KAAM,WAEV,KAAK,EAEH,OADAP,EAAaC,EAAUhD,KAChBgD,EAAUlH,OAAO,SAAU,CAChCyH,OAAQR,EAAWS,MACnBjB,OAAQ,YAEZ,KAAK,EAGH,MAFAS,EAAUpH,KAAO,EACjBoH,EAAUnD,GAAKmD,EAAiB,MAAE,GAC5BnJ,KAAKsJ,YAAY,wDACzB,KAAK,GACL,IAAK,MACH,OAAOH,EAAUnF,OAGzB,GAAGiF,EAAUjJ,KAAM,CAAC,CAAC,EAAG,IAC1B,KAIA,OAHA,WACE,OAAOgJ,EAAkB5H,MAAMpB,KAAMqB,UACvC,CAEF,CAvCO,IAwCN,CACDC,IAAK,qBACLC,MAAO,WACL,IAAIqI,EAAsB1I,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASoI,IAClZ,OAAO3I,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAmBiI,GAC9M,OACE,OAAQA,EAAU/H,KAAO+H,EAAU9H,MACjC,KAAK,EACH,MAAMhC,KAAK+J,cAAc,2BAC3B,KAAK,EACL,IAAK,MACH,OAAOD,EAAU9F,OAGzB,GAAG6F,EAAU7J,KACf,KAIA,OAHA,WACE,OAAO4J,EAAoBxI,MAAMpB,KAAMqB,UACzC,CAEF,CAlBO,IAmBN,CACDC,IAAK,2BACLC,MAAO,WACL,IAAIyI,EAA4B9I,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAASwI,IACxZ,OAAO/I,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAoBqI,GAC/M,OACE,OAAQA,EAAWnI,KAAOmI,EAAWlI,MACnC,KAAK,EACH,MAAMhC,KAAKsJ,YAAY,2BACzB,KAAK,EACL,IAAK,MACH,OAAOY,EAAWlG,OAG1B,GAAGiG,EAAWjK,KAChB,KAIA,OAHA,WACE,OAAOgK,EAA0B5I,MAAMpB,KAAMqB,UAC/C,CAEF,CAlBO,IAmBN,CACDC,IAAK,0BACLC,MAAO,WACL,IAAI4I,EAA2BjJ,OAAOR,EAAmK,EAA1KQ,CAA2LA,OAAOT,EAAqK,EAA5KS,GAAiLO,MAAK,SAAS2I,IACvZ,OAAOlJ,OAAOT,EAAqK,EAA5KS,GAAiLW,MAAK,SAAoBwI,GAC/M,OACE,OAAQA,EAAWtI,KAAOsI,EAAWrI,MACnC,KAAK,EACH,MAAMhC,KAAKsJ,YAAY,2BACzB,KAAK,EACL,IAAK,MACH,OAAOe,EAAWrG,OAG1B,GAAGoG,EAAWpK,KAChB,KAIA,OAHA,WACE,OAAOmK,EAAyB/I,MAAMpB,KAAMqB,UAC9C,CAEF,CAlBO,MAoBFd,CACT,CA5c6B,CA4c3BQ,EAAgE,GAC9DP,EAAS,IAAID,CAGV"},"input":"(this[\"webpackJsonpportals-ecommerce-demo\"] = this[\"webpackJsonpportals-ecommerce-demo\"] || []).push([[41],{\n\n/***/ 143:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraWeb\", function() { return CameraWeb; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Camera\", function() { return Camera; });\n/* harmony import */ var _Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);\n/* harmony import */ var _Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);\n/* harmony import */ var _Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);\n/* harmony import */ var _Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9);\n/* harmony import */ var _Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11);\n/* harmony import */ var _Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12);\n/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22);\n/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(51);\n\n\n\n\n\n\n\n\nvar CameraWeb = /*#__PURE__*/function (_WebPlugin) {\n  Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(CameraWeb, _WebPlugin);\n  var _super = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(CameraWeb);\n  function CameraWeb() {\n    Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this, CameraWeb);\n    return _super.apply(this, arguments);\n  }\n  Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(CameraWeb, [{\n    key: \"getPhoto\",\n    value: function () {\n      var _getPhoto = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee3(options) {\n        var _this = this;\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee2(resolve, reject) {\n                    var actionSheet;\n                    return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (options.webUseInput || options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Photos) {\n                              _this.fileInputExperience(options, resolve);\n                            } else if (options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Prompt) {\n                              actionSheet = document.querySelector('pwa-action-sheet');\n                              if (!actionSheet) {\n                                actionSheet = document.createElement('pwa-action-sheet');\n                                document.body.appendChild(actionSheet);\n                              }\n                              actionSheet.header = options.promptLabelHeader || 'Photo';\n                              actionSheet.cancelable = false;\n                              actionSheet.options = [{\n                                title: options.promptLabelPhoto || 'From Photos'\n                              }, {\n                                title: options.promptLabelPicture || 'Take Picture'\n                              }];\n                              actionSheet.addEventListener('onSelection', /*#__PURE__*/function () {\n                                var _ref2 = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee(e) {\n                                  var selection;\n                                  return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee$(_context) {\n                                    while (1) {\n                                      switch (_context.prev = _context.next) {\n                                        case 0:\n                                          selection = e.detail;\n                                          if (selection === 0) {\n                                            _this.fileInputExperience(options, resolve);\n                                          } else {\n                                            _this.cameraExperience(options, resolve, reject);\n                                          }\n                                        case 2:\n                                        case \"end\":\n                                          return _context.stop();\n                                      }\n                                    }\n                                  }, _callee);\n                                }));\n                                return function (_x4) {\n                                  return _ref2.apply(this, arguments);\n                                };\n                              }());\n                            } else {\n                              _this.cameraExperience(options, resolve, reject);\n                            }\n                          case 1:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      function getPhoto(_x) {\n        return _getPhoto.apply(this, arguments);\n      }\n      return getPhoto;\n    }()\n  }, {\n    key: \"pickImages\",\n    value: function () {\n      var _pickImages = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee5(_options) {\n        var _this2 = this;\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref3 = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee4(resolve) {\n                    return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            _this2.multipleFileInputExperience(resolve);\n                          case 1:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n                  return function (_x6) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }()));\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      function pickImages(_x5) {\n        return _pickImages.apply(this, arguments);\n      }\n      return pickImages;\n    }()\n  }, {\n    key: \"cameraExperience\",\n    value: function () {\n      var _cameraExperience = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee7(options, resolve, reject) {\n        var _this3 = this;\n        var cameraModal;\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!customElements.get('pwa-camera-modal')) {\n                  _context7.next = 16;\n                  break;\n                }\n                cameraModal = document.createElement('pwa-camera-modal');\n                cameraModal.facingMode = options.direction === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraDirection */ \"a\"].Front ? 'user' : 'environment';\n                document.body.appendChild(cameraModal);\n                _context7.prev = 4;\n                _context7.next = 7;\n                return cameraModal.componentOnReady();\n              case 7:\n                cameraModal.addEventListener('onPhoto', /*#__PURE__*/function () {\n                  var _ref4 = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee6(e) {\n                    var photo;\n                    return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee6$(_context6) {\n                      while (1) {\n                        switch (_context6.prev = _context6.next) {\n                          case 0:\n                            photo = e.detail;\n                            if (!(photo === null)) {\n                              _context6.next = 5;\n                              break;\n                            }\n                            reject(new _capacitor_core__WEBPACK_IMPORTED_MODULE_6__[/* CapacitorException */ \"a\"]('User cancelled photos app'));\n                            _context6.next = 14;\n                            break;\n                          case 5:\n                            if (!(photo instanceof Error)) {\n                              _context6.next = 9;\n                              break;\n                            }\n                            reject(photo);\n                            _context6.next = 14;\n                            break;\n                          case 9:\n                            _context6.t0 = resolve;\n                            _context6.next = 12;\n                            return _this3._getCameraPhoto(photo, options);\n                          case 12:\n                            _context6.t1 = _context6.sent;\n                            (0, _context6.t0)(_context6.t1);\n                          case 14:\n                            cameraModal.dismiss();\n                            document.body.removeChild(cameraModal);\n                          case 16:\n                          case \"end\":\n                            return _context6.stop();\n                        }\n                      }\n                    }, _callee6);\n                  }));\n                  return function (_x10) {\n                    return _ref4.apply(this, arguments);\n                  };\n                }());\n                cameraModal.present();\n                _context7.next = 14;\n                break;\n              case 11:\n                _context7.prev = 11;\n                _context7.t0 = _context7[\"catch\"](4);\n                this.fileInputExperience(options, resolve);\n              case 14:\n                _context7.next = 18;\n                break;\n              case 16:\n                console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements.\");\n                this.fileInputExperience(options, resolve);\n              case 18:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[4, 11]]);\n      }));\n      function cameraExperience(_x7, _x8, _x9) {\n        return _cameraExperience.apply(this, arguments);\n      }\n      return cameraExperience;\n    }()\n  }, {\n    key: \"fileInputExperience\",\n    value: function fileInputExperience(options, resolve) {\n      var input = document.querySelector('#_capacitor-camera-input');\n      var cleanup = function cleanup() {\n        var _a;\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input';\n        input.type = 'file';\n        input.hidden = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var file = input.files[0];\n          var format = 'jpeg';\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n          if (options.resultType === 'dataUrl' || options.resultType === 'base64') {\n            var reader = new FileReader();\n            reader.addEventListener('load', function () {\n              if (options.resultType === 'dataUrl') {\n                resolve({\n                  dataUrl: reader.result,\n                  format: format\n                });\n              } else if (options.resultType === 'base64') {\n                var b64 = reader.result.split(',')[1];\n                resolve({\n                  base64String: b64,\n                  format: format\n                });\n              }\n              cleanup();\n            });\n            reader.readAsDataURL(file);\n          } else {\n            resolve({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n            cleanup();\n          }\n        });\n      }\n      input.accept = 'image/*';\n      input.capture = true;\n      if (options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Photos || options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Prompt) {\n        input.removeAttribute('capture');\n      } else if (options.direction === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraDirection */ \"a\"].Front) {\n        input.capture = 'user';\n      } else if (options.direction === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraDirection */ \"a\"].Rear) {\n        input.capture = 'environment';\n      }\n      input.click();\n    }\n  }, {\n    key: \"multipleFileInputExperience\",\n    value: function multipleFileInputExperience(resolve) {\n      var input = document.querySelector('#_capacitor-camera-input-multiple');\n      var cleanup = function cleanup() {\n        var _a;\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input-multiple';\n        input.type = 'file';\n        input.hidden = true;\n        input.multiple = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var photos = [];\n          // eslint-disable-next-line @typescript-eslint/prefer-for-of\n          for (var i = 0; i < input.files.length; i++) {\n            var file = input.files[i];\n            var format = 'jpeg';\n            if (file.type === 'image/png') {\n              format = 'png';\n            } else if (file.type === 'image/gif') {\n              format = 'gif';\n            }\n            photos.push({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n          }\n          resolve({\n            photos: photos\n          });\n          cleanup();\n        });\n      }\n      input.accept = 'image/*';\n      input.click();\n    }\n  }, {\n    key: \"_getCameraPhoto\",\n    value: function _getCameraPhoto(photo, options) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var format = photo.type.split('/')[1];\n        if (options.resultType === 'uri') {\n          resolve({\n            webPath: URL.createObjectURL(photo),\n            format: format,\n            saved: false\n          });\n        } else {\n          reader.readAsDataURL(photo);\n          reader.onloadend = function () {\n            var r = reader.result;\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: r,\n                format: format,\n                saved: false\n              });\n            } else {\n              resolve({\n                base64String: r.split(',')[1],\n                format: format,\n                saved: false\n              });\n            }\n          };\n          reader.onerror = function (e) {\n            reject(e);\n          };\n        }\n      });\n    }\n  }, {\n    key: \"checkPermissions\",\n    value: function () {\n      var _checkPermissions = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee8() {\n        var permission;\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(typeof navigator === 'undefined' || !navigator.permissions)) {\n                  _context8.next = 2;\n                  break;\n                }\n                throw this.unavailable('Permissions API not available in this browser');\n              case 2:\n                _context8.prev = 2;\n                _context8.next = 5;\n                return window.navigator.permissions.query({\n                  name: 'camera'\n                });\n              case 5:\n                permission = _context8.sent;\n                return _context8.abrupt(\"return\", {\n                  camera: permission.state,\n                  photos: 'granted'\n                });\n              case 9:\n                _context8.prev = 9;\n                _context8.t0 = _context8[\"catch\"](2);\n                throw this.unavailable('Camera permissions are not available in this browser');\n              case 12:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[2, 9]]);\n      }));\n      function checkPermissions() {\n        return _checkPermissions.apply(this, arguments);\n      }\n      return checkPermissions;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee9() {\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                throw this.unimplemented('Not implemented on web.');\n              case 1:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n      function requestPermissions() {\n        return _requestPermissions.apply(this, arguments);\n      }\n      return requestPermissions;\n    }()\n  }, {\n    key: \"pickLimitedLibraryPhotos\",\n    value: function () {\n      var _pickLimitedLibraryPhotos = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee10() {\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                throw this.unavailable('Not implemented on web.');\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n      function pickLimitedLibraryPhotos() {\n        return _pickLimitedLibraryPhotos.apply(this, arguments);\n      }\n      return pickLimitedLibraryPhotos;\n    }()\n  }, {\n    key: \"getLimitedLibraryPhotos\",\n    value: function () {\n      var _getLimitedLibraryPhotos = Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee11() {\n        return Object(_Users_jiayingsu_Projects_portals_ecommerce_demo_main_web_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                throw this.unavailable('Not implemented on web.');\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n      function getLimitedLibraryPhotos() {\n        return _getLimitedLibraryPhotos.apply(this, arguments);\n      }\n      return getLimitedLibraryPhotos;\n    }()\n  }]);\n  return CameraWeb;\n}(_capacitor_core__WEBPACK_IMPORTED_MODULE_6__[/* WebPlugin */ \"c\"]);\nvar Camera = new CameraWeb();\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../../src/web.ts"],"names":["CameraWeb","options","Promise","resolve","reject","webUseInput","source","CameraSource","Photos","fileInputExperience","Prompt","actionSheet","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","title","promptLabelPhoto","promptLabelPicture","addEventListener","e","selection","detail","cameraExperience","_options","multipleFileInputExperience","customElements","get","cameraModal","facingMode","direction","CameraDirection","Front","componentOnReady","photo","CapacitorException","Error","_getCameraPhoto","dismiss","removeChild","present","console","error","input","cleanup","parentNode","id","type","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","Rear","click","multiple","photos","i","length","push","saved","onloadend","r","onerror","navigator","permissions","unavailable","window","query","name","permission","camera","state","unimplemented","WebPlugin","Camera"],"mappings":"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","file":"x","sourcesContent":["import { WebPlugin, CapacitorException } from '@capacitor/core';\n\nimport { CameraSource, CameraDirection } from './definitions';\nimport type {\n  CameraPlugin,\n  GalleryImageOptions,\n  GalleryPhotos,\n  ImageOptions,\n  PermissionStatus,\n  Photo,\n} from './definitions';\n\nexport class CameraWeb extends WebPlugin implements CameraPlugin {\n  async getPhoto(options: ImageOptions): Promise<Photo> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<Photo>(async (resolve, reject) => {\n      if (options.webUseInput || options.source === CameraSource.Photos) {\n        this.fileInputExperience(options, resolve);\n      } else if (options.source === CameraSource.Prompt) {\n        let actionSheet: any = document.querySelector('pwa-action-sheet');\n        if (!actionSheet) {\n          actionSheet = document.createElement('pwa-action-sheet');\n          document.body.appendChild(actionSheet);\n        }\n        actionSheet.header = options.promptLabelHeader || 'Photo';\n        actionSheet.cancelable = false;\n        actionSheet.options = [\n          { title: options.promptLabelPhoto || 'From Photos' },\n          { title: options.promptLabelPicture || 'Take Picture' },\n        ];\n        actionSheet.addEventListener('onSelection', async (e: any) => {\n          const selection = e.detail;\n          if (selection === 0) {\n            this.fileInputExperience(options, resolve);\n          } else {\n            this.cameraExperience(options, resolve, reject);\n          }\n        });\n      } else {\n        this.cameraExperience(options, resolve, reject);\n      }\n    });\n  }\n\n  async pickImages(_options: GalleryImageOptions): Promise<GalleryPhotos> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<GalleryPhotos>(async resolve => {\n      this.multipleFileInputExperience(resolve);\n    });\n  }\n\n  private async cameraExperience(\n    options: ImageOptions,\n    resolve: any,\n    reject: any,\n  ) {\n    if (customElements.get('pwa-camera-modal')) {\n      const cameraModal: any = document.createElement('pwa-camera-modal');\n      cameraModal.facingMode =\n        options.direction === CameraDirection.Front ? 'user' : 'environment';\n      document.body.appendChild(cameraModal);\n      try {\n        await cameraModal.componentOnReady();\n        cameraModal.addEventListener('onPhoto', async (e: any) => {\n          const photo = e.detail;\n\n          if (photo === null) {\n            reject(new CapacitorException('User cancelled photos app'));\n          } else if (photo instanceof Error) {\n            reject(photo);\n          } else {\n            resolve(await this._getCameraPhoto(photo, options));\n          }\n\n          cameraModal.dismiss();\n          document.body.removeChild(cameraModal);\n        });\n\n        cameraModal.present();\n      } catch (e) {\n        this.fileInputExperience(options, resolve);\n      }\n    } else {\n      console.error(\n        `Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements.`,\n      );\n      this.fileInputExperience(options, resolve);\n    }\n  }\n\n  private fileInputExperience(options: ImageOptions, resolve: any) {\n    let input = document.querySelector(\n      '#_capacitor-camera-input',\n    ) as HTMLInputElement;\n\n    const cleanup = () => {\n      input.parentNode?.removeChild(input);\n    };\n\n    if (!input) {\n      input = document.createElement('input') as HTMLInputElement;\n      input.id = '_capacitor-camera-input';\n      input.type = 'file';\n      input.hidden = true;\n      document.body.appendChild(input);\n      input.addEventListener('change', (_e: any) => {\n        const file = input.files![0];\n        let format = 'jpeg';\n\n        if (file.type === 'image/png') {\n          format = 'png';\n        } else if (file.type === 'image/gif') {\n          format = 'gif';\n        }\n\n        if (\n          options.resultType === 'dataUrl' ||\n          options.resultType === 'base64'\n        ) {\n          const reader = new FileReader();\n\n          reader.addEventListener('load', () => {\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: reader.result,\n                format,\n              } as Photo);\n            } else if (options.resultType === 'base64') {\n              const b64 = (reader.result as string).split(',')[1];\n              resolve({\n                base64String: b64,\n                format,\n              } as Photo);\n            }\n\n            cleanup();\n          });\n\n          reader.readAsDataURL(file);\n        } else {\n          resolve({\n            webPath: URL.createObjectURL(file),\n            format: format,\n          });\n          cleanup();\n        }\n      });\n    }\n\n    input.accept = 'image/*';\n    (input as any).capture = true;\n\n    if (\n      options.source === CameraSource.Photos ||\n      options.source === CameraSource.Prompt\n    ) {\n      input.removeAttribute('capture');\n    } else if (options.direction === CameraDirection.Front) {\n      (input as any).capture = 'user';\n    } else if (options.direction === CameraDirection.Rear) {\n      (input as any).capture = 'environment';\n    }\n\n    input.click();\n  }\n\n  private multipleFileInputExperience(resolve: any) {\n    let input = document.querySelector(\n      '#_capacitor-camera-input-multiple',\n    ) as HTMLInputElement;\n\n    const cleanup = () => {\n      input.parentNode?.removeChild(input);\n    };\n\n    if (!input) {\n      input = document.createElement('input') as HTMLInputElement;\n      input.id = '_capacitor-camera-input-multiple';\n      input.type = 'file';\n      input.hidden = true;\n      input.multiple = true;\n      document.body.appendChild(input);\n      input.addEventListener('change', (_e: any) => {\n        const photos = [];\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (let i = 0; i < input.files!.length; i++) {\n          const file = input.files![i];\n          let format = 'jpeg';\n\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n          photos.push({\n            webPath: URL.createObjectURL(file),\n            format: format,\n          });\n        }\n        resolve({ photos });\n        cleanup();\n      });\n    }\n\n    input.accept = 'image/*';\n\n    input.click();\n  }\n\n  private _getCameraPhoto(photo: Blob, options: ImageOptions) {\n    return new Promise<Photo>((resolve, reject) => {\n      const reader = new FileReader();\n      const format = photo.type.split('/')[1];\n      if (options.resultType === 'uri') {\n        resolve({\n          webPath: URL.createObjectURL(photo),\n          format: format,\n          saved: false,\n        });\n      } else {\n        reader.readAsDataURL(photo);\n        reader.onloadend = () => {\n          const r = reader.result as string;\n          if (options.resultType === 'dataUrl') {\n            resolve({\n              dataUrl: r,\n              format: format,\n              saved: false,\n            });\n          } else {\n            resolve({\n              base64String: r.split(',')[1],\n              format: format,\n              saved: false,\n            });\n          }\n        };\n        reader.onerror = e => {\n          reject(e);\n        };\n      }\n    });\n  }\n\n  async checkPermissions(): Promise<PermissionStatus> {\n    if (typeof navigator === 'undefined' || !navigator.permissions) {\n      throw this.unavailable('Permissions API not available in this browser');\n    }\n\n    try {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n      // the specific permissions that are supported varies among browsers that implement the\n      // permissions API, so we need a try/catch in case 'camera' is invalid\n      const permission = await window.navigator.permissions.query({\n        name: 'camera',\n      });\n      return {\n        camera: permission.state,\n        photos: 'granted',\n      };\n    } catch {\n      throw this.unavailable(\n        'Camera permissions are not available in this browser',\n      );\n    }\n  }\n\n  async requestPermissions(): Promise<PermissionStatus> {\n    throw this.unimplemented('Not implemented on web.');\n  }\n\n  async pickLimitedLibraryPhotos(): Promise<GalleryPhotos> {\n    throw this.unavailable('Not implemented on web.');\n  }\n\n  async getLimitedLibraryPhotos(): Promise<GalleryPhotos> {\n    throw this.unavailable('Not implemented on web.');\n  }\n}\n\nconst Camera = new CameraWeb();\n\nexport { Camera };\n"]}}